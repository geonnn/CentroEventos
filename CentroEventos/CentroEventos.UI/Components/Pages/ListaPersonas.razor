@page "/listas/personas"
@inject Sesion sesion
@inject ListarPersonaUseCase ListarPersonaUseCase
@inject BajaPersonaUseCase BajaPersonaUseCase

<h3>Personas</h3>

@if (sesion?.Usuario != null && sesion.Usuario.PoseeElPermiso(Permiso.PersonaAlta)){
    <button @onclick="NuevaPersona">Agregar Persona</button>
    <ModalAlta @ref=alta/>
}
<table>
    <tr>
        <th>ID</th>
        <th>Nombre</th>
        <th>Apellido</th>
        <th>Email</th>
        <th>Acción</th>
    </tr>
    @foreach (var persona in _lista)
    {
    <tr>
        <td>@persona.Id</td>
        <td>@persona.Nombre</td>
        <td>@persona.Apellido</td>
        <td>@persona.Email</td>
        <td>
            <button class="btn btn-danger" @onclick="()=>ConfirmarEliminacion(persona)">Eliminar</button>
        </td>
    </tr>
    }
 </table>

@code {
    List<Persona> _lista = new List<Persona>();
    protected override void OnInitialized()
    {
        _lista = ListarPersonaUseCase.Ejecutar();
    }
    ModalAlta alta = new();
    private void NuevaPersona() {
        alta.Mostrar();
    }

    private void ConfirmarEliminacion(Persona p)
    {
        
    }
}
