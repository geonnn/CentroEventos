@page "/register"
@rendermode InteractiveServer
@inject NavigationManager Navigation
@inject RegistroUseCase registroUseCase
@inject LoginUseCase loginUseCase


<PageTitle>Registro de usuario</PageTitle>

<h1> Bienvenido! </h1>

<form class="formulario">
    <label for="nombre">Nombre:</label>
    <input required id="nombre" type="nombre" @bind="nombre" />

    <label for="apellido">Apellido:</label>
    <input required id="apellido" type="apellido" @bind="apellido" />

    <label for="email">Email:</label>
    <input required id="email" type="email" @bind="email" />

    <label for="password">Contraseña:</label>
    <input required id="password" type="password" @bind="password" />

    <button type="button" @onclick="Registro">Registrarse</button>

    <p>Ya tenés un usuario? <a href="/">login</a></p>

</form>

@code
{
    private string nombre = "";
    private string apellido = "";
    private string email = "";
    private string password = "";

    protected void Registro()
    {
        Usuario usuario = new Usuario(nombre, apellido, email, password);
        registroUseCase.Ejecutar(usuario);
        loginUseCase.Ejecutar(email, password);
        Navigation.NavigateTo("/home", true);
    }
}
